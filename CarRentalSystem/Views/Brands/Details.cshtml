@model CarRentalSystem.Entities.Vehicles.Brand

@{
    ViewData["Title"] = "Brand Details";
}

<div class="container-fluid">
    <!-- Page Header -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="display-5 fw-bold mb-0">
                <i class="fas fa-trademark text-primary"></i> Brand Details
            </h1>
            <p class="text-muted">Detailed information about @Model.BrandName</p>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="row mb-3">
        <div class="col-12">
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">
                <i class="fas fa-edit"></i> Edit Brand
            </a>
            <a asp-action="Index" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to List
            </a>
        </div>
    </div>

    <!-- Brand Information Card -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0">
                <i class="fas fa-info-circle"></i> Brand Information
            </h4>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <dl class="row">
                        <dt class="col-sm-4">
                            <i class="fas fa-trademark text-primary"></i> Brand Name
                        </dt>
                        <dd class="col-sm-8">
                            <strong>@Model.BrandName</strong>
                        </dd>

                        @if (!string.IsNullOrEmpty(Model.Country))
                        {
                            <dt class="col-sm-4">
                                <i class="fas fa-globe text-primary"></i> Country
                            </dt>
                            <dd class="col-sm-8">
                                @Model.Country
                            </dd>
                        }

                        @if (!string.IsNullOrEmpty(Model.BodyType))
                        {
                            <dt class="col-sm-4">
                                <i class="fas fa-car-side text-primary"></i> Body Type
                            </dt>
                            <dd class="col-sm-8">
                                @Model.BodyType
                            </dd>
                        }
                    </dl>
                </div>
                <div class="col-md-6">
                    <dl class="row">
                        @if (Model.Year > 0)
                        {
                            <dt class="col-sm-4">
                                <i class="fas fa-calendar text-primary"></i> Year
                            </dt>
                            <dd class="col-sm-8">
                                @Model.Year
                            </dd>
                        }

                        @if (!string.IsNullOrEmpty(Model.Transmission))
                        {
                            <dt class="col-sm-4">
                                <i class="fas fa-cog text-primary"></i> Transmission
                            </dt>
                            <dd class="col-sm-8">
                                @Model.Transmission
                            </dd>
                        }

                        <dt class="col-sm-4">
                            <i class="fas fa-list text-primary"></i> Models Count
                        </dt>
                        <dd class="col-sm-8">
                            <span class="badge bg-info fs-6">@(Model.Models?.Count ?? 0)</span>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <!-- Associated Models Section -->
    @if (Model.Models != null && Model.Models.Any())
    {
        <div class="card shadow-sm">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0">
                    <i class="fas fa-list"></i> Associated Models (@Model.Models.Count)
                </h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover table-striped">
                        <thead class="table-dark">
                            <tr>
                                <th><i class="fas fa-hashtag"></i> ID</th>
                                <th><i class="fas fa-list"></i> Model Name</th>
                                <th><i class="fas fa-car"></i> Cars Count</th>
                                <th><i class="fas fa-cogs"></i> Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var brandModel in Model.Models.OrderBy(m => m.ModelName))
                            {
                                var carsCount = ViewBag.ModelCounts != null && 
                                               ((Dictionary<int, int>)ViewBag.ModelCounts).ContainsKey(brandModel.Id) 
                                               ? ((Dictionary<int, int>)ViewBag.ModelCounts)[brandModel.Id] 
                                               : 0;
                                
                                <tr>
                                    <td>@brandModel.Id</td>
                                    <td>
                                        <strong>@brandModel.ModelName</strong>
                                    </td>
                                    <td>
                                        <span class="badge bg-primary">@carsCount</span>
                                    </td>
                                    <td>
                                        <a asp-controller="Models" asp-action="Edit" asp-route-id="@brandModel.Id" 
                                           class="btn btn-sm btn-warning" title="Edit Model">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <a asp-controller="Models" asp-action="Delete" asp-route-id="@brandModel.Id" 
                                           class="btn btn-sm btn-danger" title="Delete Model">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="alert alert-info" role="alert">
            <h5 class="alert-heading">
                <i class="fas fa-info-circle"></i> No Models
            </h5>
            <p>This brand has no associated models yet. <a asp-controller="Models" asp-action="Create" class="alert-link">Add a model</a> for this brand.</p>
        </div>
    }
</div>
